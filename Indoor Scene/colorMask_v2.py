import maya.cmds as cmdsimport maya.mel as mel#create contribution passif not cmds.objExists('buzzyBee_customColorMask'):	contributionPass = cmds.createNode('passContributionMap', name='buzzyBee_customColorMask')else:	contributionPass = 'buzzyBee_customColorMask'#create customColor render passif not cmds.objExists('buzzyBee_customColorMask_renderPass'):	customColor = cmds.createNode('renderPass', name='buzzyBee_customColorMask_renderPass')	cmds.setRenderPassType(customColor, type='CSTCOL')	cmds.setAttr('%s.numChannels' %(customColor), 4)	cmds.setAttr('%s.frameBufferType' %(customColor), 256)	cmds.setAttr('%s.passGroupName' %(customColor), type='string')else:	customColor = 'buzzyBee_customColorMask_renderPass'#hook up necessary connectionstry:	if not cmds.isConnected('defaultRenderLayer.renderPass', '%s.owner[0]' %(customColor)):		cmds.connectAttr('defaultRenderLayer.renderPass', '%s.owner[0]' %(customColor))	if not cmds.isConnected('defaultRenderLayer.passContributionMap', '%s.owner[0]' %(contributionPass)):		cmds.connectAttr('defaultRenderLayer.passContributionMap', '%s.owner[0]' %(contributionPass))	if not cmds.isConnected('%s.message' %(customColor), '%s.renderPass[0]' %(contributionPass)):		cmds.connectAttr('%s.message' %(customColor), '%s.renderPass[0]' %(contributionPass))except:	passwriteToColorBuffer = []mesh = []#loop through all materialsfor each in cmds.ls(materials=True):    #if this specific material has "writeToColorBuffer" node hooked then...    if cmds.listConnections(each, type='writeToColorBuffer'):        try:            writeToColorBuffer += cmds.listConnections(each, type='writeToColorBuffer')        except:            pass        try:            mesh += cmds.listConnections( cmds.listConnections( each, type = 'shadingEngine' )[0], type = 'mesh' )        except:            pass		for x in set(mesh):    try:        cmds.connectAttr( '%s.message' %( x ), 'buzzyBee_customColorMask.dagObjects', nextAvailable = 1 )    except:        pass#connect to 'buzzyBee_customColorMask' contribution passmesh = []for each in writeToColorBuffer:	try:		if not cmds.isConnected('buzzyBee_customColorMask_renderPass.message', '%s.renderPass' %(each)):			cmds.connectAttr('buzzyBee_customColorMask_renderPass.message', '%s.renderPass' %(each), force=True)	except:		passhookedMesh = [ x for x in cmds.listConnections( 'buzzyBee_customColorMask.dagObjects' ) ]cmds.select( hookedMesh, replace = 1 )