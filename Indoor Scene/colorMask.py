import maya.cmds as cmds#create contribution passif not cmds.objExists('buzzyBee_customColorMask'):	contributionPass = cmds.createNode('passContributionMap', name='buzzyBee_customColorMask')else:	contributionPass = 'buzzyBee_customColorMask'#create customColor render passif not cmds.objExists('buzzyBee_customColorMask_renderPass'):	customColor = cmds.createNode('renderPass', name='buzzyBee_customColorMask_renderPass')	cmds.setRenderPassType(customColor, type='CSTCOL')	cmds.setAttr('%s.numChannels' %(customColor), 4)	cmds.setAttr('%s.frameBufferType' %(customColor), 256)	cmds.setAttr('%s.passGroupName' %(customColor), type='string')else:	customColor = 'buzzyBee_customColorMask_renderPass'#hook up necessary connectionstry:	if not cmds.isConnected('defaultRenderLayer.renderPass', '%s.owner[0]' %(customColor)):		cmds.connectAttr('defaultRenderLayer.renderPass', '%s.owner[0]' %(customColor))	if not cmds.isConnected('defaultRenderLayer.passContributionMap', '%s.owner[0]' %(contributionPass)):		cmds.connectAttr('defaultRenderLayer.passContributionMap', '%s.owner[0]' %(contributionPass))	if not cmds.isConnected('%s.message' %(customColor), '%s.renderPass[0]' %(contributionPass)):		cmds.connectAttr('%s.message' %(customColor), '%s.renderPass[0]' %(contributionPass))except:	pass#detect any materials that has 'writeToColorBuffer' hookedwriteToColorBuffer = []for each in cmds.ls(materials=True):	try:		if cmds.listConnections(each, type='writeToColorBuffer'):			writeToColorBuffer += cmds.listConnections(each, type='writeToColorBuffer')			mesh = []						cmds.hyperShade( objects = each )			for each2 in cmds.ls(selection=True, objectsOnly=True):				if each2.split('.')[0] not in mesh:					mesh.append(each2.split('.')[0])						for each3 in mesh:				try:					cmds.connectAttr('%s.message' %(cmds.listRelatives(each3, parent=True, fullPath=True)[0]), 'buzzyBee_customColorMask.dagObjects', nextAvailable=True)				except:					pass	except:		pass	cmds.refresh()#connect to 'buzzyBee_customColorMask' contribution passmesh = []for each in writeToColorBuffer:	try:		if not cmds.isConnected('buzzyBee_customColorMask_renderPass.message', '%s.renderPass' %(each)):			cmds.connectAttr('buzzyBee_customColorMask_renderPass.message', '%s.renderPass' %(each), force=True)	except:		pass